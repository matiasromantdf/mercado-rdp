import{_ as f,V as v,o as a,c as n,a as i,m as c,B as h,F as p,r as u,t as m,C as g}from"./index.5d4da705.js";import{a as C}from"./index.becf6c0c.js";const b={data(){return{url:"https://mercado.elgranero.net/api.php",carrito:[],nombre:"",direccion:"",telefono:"",tiendas:[],tiendasCarrito:[]}},components:{Swal:v},emits:["actualizarBadgeCarrito","update"],mounted(){this.carrito=JSON.parse(localStorage.getItem("carrito")),this.tiendas=C.get(this.url+"?accion=tiendas").then(e=>{this.tiendas=e.data,this.obtenerTiendasCarrito();let t=[];for(let o=0;o<this.tiendasCarrito.length;o++)for(let l=0;l<this.tiendas.length;l++)this.tiendas[l].id==this.tiendasCarrito[o]&&t.push(this.tiendas[l]);this.tiendasCarrito=t})},methods:{obtenerTiendasCarrito(){for(let e=0;e<this.carrito.length;e++)this.tiendasCarrito.indexOf(this.carrito[e].id_tienda)==-1&&this.tiendasCarrito.push(this.carrito[e].id_tienda)},eliminarTiendaCarrito(e){for(let t=0;t<this.carrito.length;t++)this.carrito[t].id_tienda==e&&(this.carrito.splice(t,1),t=t-1);for(let t=0;t<this.tiendasCarrito.length;t++)this.tiendasCarrito[t].id==e&&(this.tiendasCarrito.splice(t,1),t=t-1)},enviarPedido(e){this.$swal({title:"Pedido Registrado!",text:"Se envi\xF3 el mensaje al vendedor!",icon:"success"}),setTimeout(function(){console.log("Executed after 1 second")},3e3);var t="Hola! soy"+this.nombre+`\r
`;for(let o=0;o<this.carrito.length;o++)t+="cod: "+this.carrito[o].id+" art: "+this.carrito[o].detalle+" cant: "+this.carrito[o].cantidad+`\r
\r
`;t=window.encodeURI(t),window.open("https://api.whatsapp.com/send?phone=+549"+e.contacto+"&text="+t,"_blank"),this.eliminarTiendaCarrito(e.id),localStorage.setItem("carrito",JSON.stringify(this.carrito)),this.$emit("actualizarBadgeCarrito"),this.carrito.length==0?(this.$router.push({name:"home"}),this.$emit("update")):this.$router.push({name:"enviar"})}}},w=i("div",{class:"alert alert-info",style:{"margin-top":"0px"}},[i("p",null,"Est\xE1 todo listo para registrar el pedido! Los articulos se agruparon por tienda, al presionar el bot\xF3n vamos a enviarle a cada comerciante su pedido.")],-1),y={class:"formulario"},x={class:"container"},k={class:"row",id:"fila"},V=i("div",{class:"col col-2"},[i("i",{id:"icono-form",class:"fas fa-user"})],-1),S={class:"col col-10"},B={class:"row",id:"fila"},E=i("div",{class:"col col-2"},[i("i",{id:"icono-form",class:"fas fa-map-marker-alt"})],-1),T={class:"col col-10"},N={class:"row",id:"fila"},P=i("div",{class:"col col-2"},[i("i",{id:"icono-form",class:"fas fa-mobile"})],-1),U={class:"col col-10"},j=i("div",{class:"row",id:"fila"},[i("br"),i("br"),i("div",{class:"col col-2"})],-1),D={class:"container"},I=["onClick"],O={key:0},z=i("hr",null,null,-1);function F(e,t,o,l,r,_){return a(),n(p,null,[w,i("div",y,[i("div",x,[i("div",k,[V,i("div",S,[c(i("input",{type:"text",class:"form-control",id:"nombre",placeholder:"Nombre y Apellido","onUpdate:modelValue":t[0]||(t[0]=s=>r.nombre=s)},null,512),[[h,r.nombre]])])]),i("div",B,[E,i("div",T,[c(i("input",{type:"text",class:"form-control",id:"direccion",placeholder:"Direcci\xF3n","onUpdate:modelValue":t[1]||(t[1]=s=>r.direccion=s)},null,512),[[h,r.direccion]])])]),i("div",N,[P,i("div",U,[c(i("input",{type:"text",class:"form-control",id:"telefono",placeholder:"Tel\xE9fono","onUpdate:modelValue":t[2]||(t[2]=s=>r.telefono=s)},null,512),[[h,r.telefono]])])]),j])]),i("div",D,[(a(!0),n(p,null,u(r.tiendasCarrito,s=>(a(),n("div",{key:s,class:"table",id:"tabla"},[i("h4",null,m(s.nombre),1),i("button",{class:"btn sm btn-primary",style:{float:"right"},onClick:d=>_.enviarPedido(s)},"Enviar",8,I),(a(!0),n(p,null,u(r.carrito,d=>(a(),n("div",{key:d},[d.id_tienda==s.id?(a(),n("div",O,[i("td",null,m(d.detalle)+": "+m(d.cantidad),1)])):g("",!0)]))),128)),z]))),128))])],64)}var R=f(b,[["render",F]]);export{R as default};
