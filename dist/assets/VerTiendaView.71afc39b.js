import{C as g,S as _,P as p,N as f,s as v}from"./carousel.95a344b0.js";import{a as h}from"./index.becf6c0c.js";import{_ as b,d as C,o as r,c as l,e as y,a,t as n,F as c,r as m}from"./index.c4c070fb.js";const S={emits:{actualizarBadgeCarrito:"actualizarBadgeCarrito",update:"update"},name:"ArticulosPortada",data(){return{url:"https://mercado.elgranero.net/api/api.php",nombreTienda:"",isLoading:!0,settings:{dir:"ltr"},articulos:"",carrito:[],fotos:"",fotomodal:""}},components:{Carousel:g,Slide:_,Pagination:p,Navigation:f,Loading:v},methods:{verModal(t){this.fotomodal=t,$("#modalFoto").modal("show")},cerrarModal(){$("#modalFoto").modal("hide")},estaEnCarrito(t){return this.carrito.find(o=>o.id==t)?"../src/assets/en-carrito.png":"../src/assets/al-carrito.png"},agregarAlCarrito(t){this.carrito.find(o=>o.id==t.id)?alert("ya esta en el carrito"):(t.cantidad=1,this.carrito.push(t),this.$toast.success("se agrego correctamente al carrito! ",{position:"top-left"}),localStorage.setItem("carrito",JSON.stringify(this.carrito)),this.$emit("actualizarBadgeCarrito"))},rnd(){return Math.floor(Math.random()*(3300-2500))+2800}},mounted(){this.carrito=JSON.parse(localStorage.getItem("carrito")),this.carrito==null&&(this.carrito=[]),this.$route.params.id!="ultima"?(this.isLoading=!0,h.get(this.url+"?accion=articulos&id="+this.$route.params.id).then(t=>{console.log(t.data),this.articulos=t.data.datos,this.isLoading=!1}).catch(t=>{console.log(t)})):localStorage.getItem("tiendaSeleccionada")?(this.isLoading=!0,h.get(this.url+"?accion=articulos&id="+localStorage.getItem("tiendaSeleccionada")).then(t=>{this.articulos=t.data.datos,this.isLoading=!1}).catch(t=>{console.log(t)})):(alert("No hay tienda seleccionada"),this.$router.push("/"),this.$emit("update",1)),this.nombreTienda=sessionStorage.getItem("nombreTienda")}},k={class:"container"},L={class:"row"},F={class:"col"},M={class:"lado-izq"},x={class:"fotos"},N=["src","onClick"],B={class:"lado-der"},T={class:"nombre"},V=["id","onClick"],w=["src"],I={class:"modal fade",id:"modalFoto",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},z={class:"modal-dialog",role:"document"},A={class:"modal-content"},E=a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"exampleModalLabel"})],-1),P={class:"modal-body"},j=["src"],D={class:"modal-footer"};function J(t,o,O,q,d,s){const u=C("loading");return r(),l(c,null,[y(u,{active:d.isLoading,"can-cancel":!1,"is-full-page":!0,color:"#42A5F5","background-color":"#D6FEFF"},null,8,["active"]),a("div",k,[a("div",L,[a("div",F,[a("h1",null,n(d.nombreTienda),1),(r(!0),l(c,null,m(d.articulos,e=>(r(),l("div",{class:"tarjeta",key:e.id},[a("div",M,[a("div",x,[(r(!0),l(c,null,m(e.fotos,i=>(r(),l("div",{key:i},[a("img",{class:"foto",src:i==""?"../src/assets/sin-imagen.jpg":i,onClick:G=>s.verModal(i)},null,8,N)]))),128))])]),a("div",B,[a("div",T,[a("h4",null,n(e.detalle),1),a("p",null,"Precio: "+n(e.precio),1)]),a("a",{id:e.id,onClick:i=>s.agregarAlCarrito(e)},[a("img",{src:s.estaEnCarrito(e.id)},null,8,w)],8,V)])]))),128))])])]),a("div",I,[a("div",z,[a("div",A,[E,a("div",P,[a("img",{src:d.fotomodal,style:{width:"80%"}},null,8,j)]),a("div",D,[a("button",{type:"button",class:"btn btn-secondary",onClick:o[0]||(o[0]=(...e)=>s.cerrarModal&&s.cerrarModal(...e))},"Cerrar")])])])])],64)}var R=b(S,[["render",J]]);export{R as default};
